<!DOCTYPE html>
<html><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Security Researcher in Reversing/Malware/Low Level fields">
    <meta name="Author" content="Midnight Reverser">
    <meta name="keywords" content="midnighthackings midnight-rev midnight">
    <link rel="stylesheet" href=https://blog.midnighthackings.com/css/syntax.css>
    <link rel="stylesheet" href=https://blog.midnighthackings.com/css/style.css>
    <script src="https://kit.fontawesome.com/1b7478c139.js" crossorigin="anonymous"></script>
    <title>Midnight Hackings - #FimDaEscala6x1</title>
  </head><body><aside id="sidenav">
    <header>
    
        <a href=https://blog.midnighthackings.com/><img src="https://blog.midnighthackings.com/avatar.png" alt="avatar"></a>
        
    

    <a id="branding" href=https://blog.midnighthackings.com/>
        
            Midnight's Home
        
    </a>
    </header>

    <nav>
        
            		
            <a href="/posts"
                
            >
                <i class="fas fa-keyboard fa-ms"></i>
                <span>posts</span>
            </a>
        
            		
            <a href="/tags"
                
            >
                <i class="fas fa-tags fa-ms"></i>
                <span>tags</span>
            </a>
        
            		
            <a href="https://github.com/midnight-rev"
                
                    target="_blank"
                
            >
                <i class="fab fa-github fa-ms"></i>
                <span>github</span>
            </a>
        
            		
            <a href="/index.xml"
                
            >
                <i class="fas fa-rss fa-ms"></i>
                <span>RSS</span>
            </a>
        
            		
            <a href="/contact"
                
            >
                <i class="far fa-envelope"></i>
                <span>contact</span>
            </a>
        
    </nav>
</aside>
<main id="main">
            <a href="javascript:void(0)" id="closebtn" onclick="navToggle()"><i class="fas fa-bars fa-lg"></i></a>
            <div class="content">
<code>
    <center>
    <p style="font-weight: bolder;color: red;"> Midnight Hackings apoia o fim da escala 6x1. </p>
    <p style="font-weight: bolder;color: red;">Todos nós trabalhadores devemos ter direito à vida além do trabalho! Trabalhadores unidos mudam o mundo.</p>
    </center>
</code>
    
    <h1 id="title">Notas sobre Penetration Testing 0x00</h1>
    
    
      
    <nav id="TableOfContents">
  <ul>
    <li><a href="#diferenças-entre-atividades-de-pentest-e-red-team">Diferenças entre atividades de Pentest e Red Team</a></li>
    <li><a href="#é-necessário-saber-programação-para-ingressar-na-carreira">É necessário saber programação para ingressar na carreira?</a></li>
  </ul>

  <ul>
    <li><a href="#black-box">Black-box</a></li>
    <li><a href="#gray-box">Gray-box</a></li>
    <li><a href="#white-box">White-box</a></li>
  </ul>
</nav>
    <h1 id="introdução-às-notas-de-estudo">Introdução às notas de estudo</h1>
<p>Sexta (28/06/2024) comecei minha jornada rumo à Segurança Ofensiva, visando mudar minha área profissional de 4 anos em Blue e Purple Team. O motivo para essa mudança, além de busca de mais vagas de trabalho, é para fortalecer meu conhecimento em cybersecurity através do hacking propriamente dito. Então, let&rsquo;s hack!</p>
<p>Atualmente estou estudando para a certificação <a href="https://security.ine.com/certifications/ejpt-certification/">eJPT</a>, da iNE Security. É uma certificação entry-level de custo baixo (pelo menos fora do Brasil), que abrange desde as fases iniciais de um pentest até o pós exploratório, com uma prova de 35 questões sobre um laboratório de 5 máquinas, que deve ser realizado em até 48 horas.</p>
<p>Nessa série de notas, irei documentar os conteúdos e plataformas que utilizarei para estudo da minha trilha em pentest, focando na certificação mas não se limitando a ela. Não levem tudo o que for explicado nessas notas como 100% correto, visto que erros podem ocorrer e estarei explicando os conceitos da forma que eu melhor entendo.</p>
<p>Então, vamos à nota de hoje!</p>
<h1 id="introdução-ao-pentest">Introdução ao Pentest</h1>
<p>Testes de penetração, ou simplesmente pentest, é uma forma de realizar testes de segurança em uma corporação, seja nas suas aplicações expostas para a internet ou internas ou na sua infraestrutura, através da aplicação de metodologias e ferramentas de segurança ofensiva.</p>
<p>O valor de um pentest está na descoberta de um caminho de ataque, tendo como meta atingir um objetivo em especifico. Esse objetivo pode ser atingir um servidor em específico, realizar a extração do banco de dados, roubar informações ou escalar para o privilégio mais alto disponível no ambiente.</p>
<p>Tal objetivo é, por vezes, informado direta ou indiretamente pelo cliente, através de uma proposta comercial. Nessa proposta, o cliente irá decidir pelo tipo de pentest (tópico que veremos à frente), informações/acessos (se necessário), e o escopo. O profissional deverá se atentar ao escopo da operação, pois é o escopo que irá traçar limites para a atuação de um pentester. Por exemplo, no escopo será informado se testes DDoS e de engenharia social poderão ser aplicados, se dumps de determinados bancos podem ser feitos, quais sistemas não constam na lista de alvos, entre outras informações.</p>
<p>Seguir o escopo é uma obrigação legal e desrespeitá-lo pode resultar em quebra de contrato ou ações criminais.</p>
<h2 id="diferenças-entre-atividades-de-pentest-e-red-team">Diferenças entre atividades de Pentest e Red Team</h2>
<p>Por muitas vezes, as atividades de times de Pentest e Red Team são confundidas entre si, pois diversas vezes os times são os mesmos. Mas vamos listar algumas diferenças sobre eles:</p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Pentest</th>
          <th style="text-align: left">Red Team</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">O pentest geralmente é contratado em períodos específicos, de curta duração (40h, 80h)</td>
          <td style="text-align: left">Exercícios de red team são realizados em um período de longa duração (meses)</td>
      </tr>
      <tr>
          <td style="text-align: left">O objetivo do pentest é encontrar falhas ou configurações errôneas que permitam a exploração</td>
          <td style="text-align: left">O red team realiza campanhas a fim de explorar mas também testar a capacidade dos times de resposta a incidentes (IR)</td>
      </tr>
      <tr>
          <td style="text-align: left">Um pentest, dependendo do tipo, se apresenta como a visão que um adversário externo teria sobre as plataformas da contratante</td>
          <td style="text-align: left">O Red Team emula adversários e atores maliciosos e mostra uma visão mais profunda sobre os riscos internos</td>
      </tr>
  </tbody>
</table>
<p>Em resumo, quando se fala de emulação de atores maliciosos e campanhas mais longas, focadas nas ações dos times de segurança, estamos tratando de exercícios de Red Team.</p>
<h2 id="é-necessário-saber-programação-para-ingressar-na-carreira">É necessário saber programação para ingressar na carreira?</h2>
<p>A princípio, não é necessário saber programar para ingressar na área de pentest. Conhecimentos de sistemas operacionais e redes são os requisitos necessários - afinal, lidar com shell reversas e firewalls necessita de certa habilidade com o terminal e entendimento de fragmentação de pacotes.</p>
<p>Entretanto, o conhecimento de programação torna-se necessário ao longo da carreira, visto que uma evolução possível do pentester é a de criar suas próprias ferramentas e malwares. Não há outra forma de entender e conseguir construir tais artefatos senão pela programação. Saber programar também traz vantangens pois o pentester compreenderá muito mais facilmente conceitos mais profundos sobre os sistemas que ele ataca.</p>
<p>Qualquer linguagem de programação, a princípio, pode ser utilizada para criar malwares e ferramentas ofensivas. Como recomendação, as linguagens C/C++ e Python são um bom começo para um pentester de sucesso.</p>
<h1 id="tipos-de-pentest">Tipos de Pentest</h1>
<p>Há três variantes de pentest:</p>
<h2 id="black-box">Black-box</h2>
<p>Um teste de caixa preta não fornece informações ou acessos ao profissional de pentest, apenas o nome da empresa ou website publicado. Isso faz com que o teste possa não ser tão profundo dado o tempo e ao nível de acesso, mas permite uma visão de um atacante externo que não tem acesso privilegiado dentro do ambiente.</p>
<h2 id="gray-box">Gray-box</h2>
<p>Testes de caixa cinza são como testes blackbox só que com algum nível de acesso ou informação, como IPs, domínios ou credenciais de usuários não privilegiados no sistema. O teste terá a visão de alguém com certo nível de privilégio, mas que não é administrador, como no caso de um sistema estudantil, em que apenas alunos e funcionários podem logar, mas os alunos têm um nível menor de privilégios.</p>
<h2 id="white-box">White-box</h2>
<p>Para analisar mais profundamente o ambiente ou o aplicativo, um teste de caixa branca pode ser requisitado. Nele, são dadas todas as informações e acessos necessários ao profissional, resultando em uma visão de um insider dentro da corporação.</p>
<h1 id="fases-de-pentest">Fases de pentest</h1>
<p>As fases de um penetration test são regidas por metodologias e padrões, como o NIST e a OWASP. Para mais informações sobre, <a href="https://www.ibm.com/blog/pen-testing-methodology/">esse artigo</a> da IBM explica mais sobre esses padrões. Mas em geral, todas elas seguem algo semelhante com as fases abaixo:</p>
<ol>
<li><strong>Pré-teste</strong>: na primeira etapa serão realizados os contratos, mapeamento do escopo, assinatura do <em>Non-Disclosure Agreement</em> (NDA) e reuniões de alinhamento, se necessário.</li>
<li><strong>Reconhecimento</strong>: essa é a primeira fase técnica, na qual o pentester irá buscar por todo tipo de informação disponível sobre a contratada. Intervalos de IP, domínios, pessoas, e-mails, setores, softwares, vagas de emprego e muitas outras informações que podem ser utilizadas nas fases posteriores são obtidas aqui, através de pesquisa em fontes abertas (OSINT). Essa é uma das fases mais importantes e longas, pois o sucesso do pentest depende das informações obtidas aqui.
Note que aqui ainda não há interação ativa entre o pentester e o ambiente da empresa contratante, caracterizando como busca de informações de forma passiva.</li>
</ol>
<blockquote>
<p>Ferramentas e conceitos que podem ser utilizados: Maltego, Google Dorks, OSINT.</p>
</blockquote>
<ol start="3">
<li><strong>Scanning e Enumeração</strong>: após obter IPs, hosts e domínios, é hora de realizar um scanning, de forma a entender quais serviços estão expostos e suas versões, configurações, entre outras coisas. Nessa etapa, a busca de informações é feita de forma ativa. Lembre-se que firewalls, WAFs e outros sistemas de defesa podem bloquear suas requisições.</li>
</ol>
<blockquote>
<p>Ferramentas e conceitos que podem ser utilizados: nmap, masscan, Banner Grabbing, fragmentação de pacotes.</p>
</blockquote>
<ol start="6">
<li><strong>Busca de vulnerabilidades</strong>: com o resultado da fase anterior, é hora de procurar por alguma vulnerabilidade conhecida ou configuração incorreta realizada nos sistemas, que permita realizar execução de código - ou várias vulnerabilidades em conjunto que permitam realizar uma execução.</li>
</ol>
<blockquote>
<p>Ferramentas e conceitos que podem ser utilizados: nessus, openvas, exploitdb.</p>
</blockquote>
<ol start="8">
<li><strong>Exploração</strong>: ao encontrar uma vulnerabilidade, é hora de atacar! Para isso, o pentester irá enviar o <em>exploit</em>, código que permite subverter um sistema e executar um código, tomando controle da máquina (dependendo do grau da vulnerabilidade). Com isso, já é possível ter acesso à rede interna do cliente!</li>
</ol>
<blockquote>
<p>Ferramentas e conceitos que podem ser utilizados: shell reversa, metasploit framework, bind shell, meterpreter.</p>
</blockquote>
<ol start="10">
<li><strong>Pós-exploração e Pivoting</strong>: só entrar na rede não é suficiente, talvez a vulnerabilidade esteja em um servidor não crítico para a corporação e o objetivo esteja bem mais guardado, dentro de um ambiente cheio de firewalls, IDS/IPS e monitoramento de times de defesa. É aqui que começa a pós exploração, com foco em escalação de privilégios e movimentação lateral.
O pivoting é uma técnica que permite que o atacante adicione uma rota para acesso à rede interna passando através do servidor comprometido, permitindo que seus ataques sejam realizados do seu sistema operacional (kali, parrot) e disfarçando o tráfego como se a origem fosse aquele servidor.</li>
</ol>
<blockquote>
<p>Ferramentas e conceitos que podem ser utilizados: exploração em Active Directory, winpeas, migração de shellcode, instalação de backdoor, scanning na intranet.</p>
</blockquote>
<ol start="12">
<li><strong>Relatório</strong>: o relatório deve ser construído com evidências de execução e vulnerabilidades e mapeado nas fases acima. Esse é o produto que deve ser entregue ao cliente, contando com sumário executivo, sumário técnico e se possível com base em frameworks e bases de conhecimento, como o MITRE ATT&amp;CK, CAPEC, entre outros.</li>
</ol>
<h1 id="plataformas-de-aprendizado">Plataformas de aprendizado</h1>
<p>Segurança ofensiva não é só teoria; um profissional deverá aplicar na prática seus conceitos. Para isso, há plataformas legais que permitem que indivíduos realizem ações maliciosas/ofensivas dentro de uma VPN segura. Algumas delas são:</p>
<ul>
<li><a href="https://tryhackme.com/">TryHackMe</a></li>
<li><a href="https://www.hackthebox.com/">Hack The Box</a></li>
</ul>
<h1 id="conclusão">Conclusão</h1>
<p>Esse foi a primeira de várias futuras outras notas que um estudante de offensive security gostaria de repassar para a comunidade :)</p>
<p>Fiquem atentos ao blog que logo mais sairão novos artigos!</p>

    
    <div class="nav-next-prev">
        <div class="nav-prev">
            
                <a href="https://blog.midnighthackings.com/posts/hello-world-arm-pt1/"><i class="fas fa-chevron-left"></i></a>
            
        </div>
        <a class="nav-top" href="#">top</i></a>
        <div class="nav-next">
            
                <a href="https://blog.midnighthackings.com/posts/my-journey-into-pentest-0x01/"><i class="fas fa-chevron-right"></i></a>
            
        </div>
    </div>
    

            </div><footer>
<div class="footer-content">

  <div class="contact-info">
      
          <div class="footer-mail">
          <i class="far fa-envelope"></i> <a href="mailto:midnight.reverser@outlook.com">midnight.reverser@outlook.com</a> </div>
      
      
  </div>


<img src="https://www.gnu.org/graphics/gplv3-with-text-136x68.png"/>
&nbsp;&nbsp;
<p class="copyright meta"> Midnight Hackings apoia GPL e o fim da escala 6x1!</p>

</div>
</footer></main>
    </body>
    <script src=https://blog.midnighthackings.com/js/navbutton.js></script>
</html>
