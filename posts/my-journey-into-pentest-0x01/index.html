<!DOCTYPE html>
<html lang="br">
<head>
  
    <title>Pentest 0x01 - Information Gathering Pt 1 :: Midnight Hackings</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content=" Escrito por: Mateus Gualberto (Midnight Reverser) - orgulho de escrever sem IA envolvida no processo!
Licen√ßa: livre, como todo conhecimento deve ser.
Introdu√ß√£o E prosseguimos na jornada rumo √† eJPT! Agora, vamos ver como prosseguir nas atividades ap√≥s o firmamento de um contrato de pentest.
Information Gathering A primeira etapa t√©cnica de um Pentest √© a busca de mais informa√ß√µes sobre o alvo, tamb√©m chamada de Information Gathering (que tamb√©m √© chamada/engloba a fase de Enumera√ß√£o, em algumas literaturas). Um pentest de sucesso tem sua base em uma boa coleta de informa√ß√µes do alvo, sendo esses tipos de informa√ß√£o os mais diversos poss√≠veis: IPs, dom√≠nios, softwares, e-mails, senhas, trabalhos, pesquisas, pessoas, organiza√ß√£o da empresa etc.
" />
<meta name="keywords" content="midnight,blog,reverse-engineer,reversing" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://blog.midnighthackings.com/posts/my-journey-into-pentest-0x01/" />





  
  <link rel="stylesheet" href="https://blog.midnighthackings.com/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css">

  
  <link rel="stylesheet" href="https://blog.midnighthackings.com/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css">

  
  <link rel="stylesheet" href="https://blog.midnighthackings.com/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css">

  
  <link rel="stylesheet" href="https://blog.midnighthackings.com/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css">

  
  <link rel="stylesheet" href="https://blog.midnighthackings.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="https://blog.midnighthackings.com/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css">

  
  <link rel="stylesheet" href="https://blog.midnighthackings.com/css/main.min.36833afd348409fc6c3d09d0897c5833d9d5bf1ff31f5e60ea3ee42ce2b1268c.css">

  
  <link rel="stylesheet" href="https://blog.midnighthackings.com/css/menu.min.3c17467ebeb3d38663dce68f71f519901124fa5cbb4519b2fb0667a21e9aca39.css">

  
  <link rel="stylesheet" href="https://blog.midnighthackings.com/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css">

  
  <link rel="stylesheet" href="https://blog.midnighthackings.com/css/post.min.e6dddd258e64c83e05cec0cd49c05216742d42fc8ecbfbe6b67083412b609bd3.css">

  
  <link rel="stylesheet" href="https://blog.midnighthackings.com/css/syntax.min.a0773cce9310cb6d8ed23e50f005448facf29a53001b57e038828daa466b25c0.css">

  
  <link rel="stylesheet" href="https://blog.midnighthackings.com/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css">

  
  <link rel="stylesheet" href="https://blog.midnighthackings.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">


<link rel="stylesheet" href="https://blog.midnighthackings.com/terminal.css">




<link rel="shortcut icon" href="https://blog.midnighthackings.com/favicon.png">
<link rel="apple-touch-icon" href="https://blog.midnighthackings.com/apple-touch-icon.png">


<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="" />



<meta property="og:locale" content="br" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Pentest 0x01 - Information Gathering Pt 1">
<meta property="og:description" content=" Escrito por: Mateus Gualberto (Midnight Reverser) - orgulho de escrever sem IA envolvida no processo!
Licen√ßa: livre, como todo conhecimento deve ser.
Introdu√ß√£o E prosseguimos na jornada rumo √† eJPT! Agora, vamos ver como prosseguir nas atividades ap√≥s o firmamento de um contrato de pentest.
Information Gathering A primeira etapa t√©cnica de um Pentest √© a busca de mais informa√ß√µes sobre o alvo, tamb√©m chamada de Information Gathering (que tamb√©m √© chamada/engloba a fase de Enumera√ß√£o, em algumas literaturas). Um pentest de sucesso tem sua base em uma boa coleta de informa√ß√µes do alvo, sendo esses tipos de informa√ß√£o os mais diversos poss√≠veis: IPs, dom√≠nios, softwares, e-mails, senhas, trabalhos, pesquisas, pessoas, organiza√ß√£o da empresa etc.
" />
<meta property="og:url" content="https://blog.midnighthackings.com/posts/my-journey-into-pentest-0x01/" />
<meta property="og:site_name" content="Midnight Hackings" />

  <meta property="og:image" content="https://blog.midnighthackings.com/og-image.png">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">


  <meta property="article:published_time" content="2024-07-25 12:00:00 -0300 -03" />












</head>
<body>


<div class="container center">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Midnight Hackings
  </div>
</a>

    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;‚ñæ</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="/posts">Postagens</a></li>
        
      
        
          <li><a href="/tags">Tags</a></li>
        
      
        
          <li><a href="https://github.com/midnight-rev">Github</a></li>
        
      
        
          <li><a href="/index.xml">RSS</a></li>
        
      
      
        <hr />
        
          <li>
            <a href="https://blog.midnighthackings.com/">üáßüá∑ Brasileiro</a>
          </li>
        
      
    </ul>
  </li>
</ul>

    
    
      <ul class="menu menu--desktop menu--language-selector">
  <li class="menu__trigger">üáßüá∑ Brasileiro&nbsp;‚ñæ</li>
  <li>
    <ul class="menu__dropdown">
      
        <li><a href="https://blog.midnighthackings.com/">üáßüá∑ Brasileiro</a></li>
      
    </ul>
  </li>
</ul>

    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="/posts" >Postagens</a></li>
        
      
        
          <li><a href="/tags" >Tags</a></li>
        
      
        
          <li><a href="https://github.com/midnight-rev" >Github</a></li>
        
      
        
          <li><a href="/index.xml" >RSS</a></li>
        
      
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://blog.midnighthackings.com/posts/my-journey-into-pentest-0x01/">Pentest 0x01 - Information Gathering Pt 1</a>
  </h1>
  <div class="post-meta"><time class="post-date">25/07/2024&nbsp;[Atualizado em 25/07/2024]</time><span class="post-reading-time">16 minuto(s) de leitura (3279 palavras)</span></div>

  
    <span class="post-tags">
      
      #<a href="https://blog.midnighthackings.com/tags/pentest/">pentest</a>&nbsp;
      
      #<a href="https://blog.midnighthackings.com/tags/intro/">intro</a>&nbsp;
      
      #<a href="https://blog.midnighthackings.com/tags/ejpt/">ejpt</a>&nbsp;
      
      #<a href="https://blog.midnighthackings.com/tags/study-notes/">study-notes</a>&nbsp;
      
    </span>
  
  


  
    <div class="table-of-contents">
      <h2>
        Sum√°rio
      </h2>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#passive-information-gathering">Passive Information Gathering</a></li>
  </ul>

  <ul>
    <li><a href="#informa√ß√µes-de-ips-e-dom√≠nios">Informa√ß√µes de IPs e dom√≠nios</a>
      <ul>
        <li><a href="#whois">whois</a></li>
      </ul>
    </li>
    <li><a href="#passive-dns">Passive DNS</a>
      <ul>
        <li><a href="#dnsdumpster">DNSDumpster</a></li>
        <li><a href="#sublist3r">sublist3r</a></li>
      </ul>
    </li>
    <li><a href="#web">Web</a>
      <ul>
        <li><a href="#netcraft">Netcraft</a></li>
        <li><a href="#tecnologias">Tecnologias</a></li>
        <li><a href="#wayback-machine">WayBack Machine</a></li>
        <li><a href="#waf">WAF</a></li>
      </ul>
    </li>
    <li><a href="#google-hacking--ghdb">Google Hacking &amp; GHDB</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#shodan">Shodan</a></li>
    <li><a href="#emails">Emails</a>
      <ul>
        <li><a href="#theharverster">theHarverster</a></li>
      </ul>
    </li>
    <li><a href="#credenciais-vazadas">Credenciais Vazadas</a></li>
    <li><a href="#outros">Outros</a></li>
  </ul>
</nav>
    </div>
  

  <div class="post-content"><div>
        <blockquote>
<p>Escrito por: Mateus Gualberto (Midnight Reverser) - <strong>orgulho de escrever sem IA envolvida no processo!</strong><br>
Licen√ßa: livre, como todo conhecimento deve ser.</p>
</blockquote>
<h1 id="introdu√ß√£o">Introdu√ß√£o<a href="#introdu√ß√£o" class="hanchor" ariaLabel="Anchor">#</a> </h1>
<p>E prosseguimos na jornada rumo √† eJPT! Agora, vamos ver como prosseguir nas atividades ap√≥s o firmamento de um contrato de pentest.</p>
<h1 id="information-gathering">Information Gathering<a href="#information-gathering" class="hanchor" ariaLabel="Anchor">#</a> </h1>
<p>A primeira etapa t√©cnica de um Pentest √© a busca de mais informa√ß√µes sobre o alvo, tamb√©m chamada de Information Gathering (que tamb√©m √© chamada/engloba a fase de Enumera√ß√£o, em algumas literaturas). Um pentest de sucesso tem sua base em uma boa coleta de informa√ß√µes do alvo, sendo esses tipos de informa√ß√£o os mais diversos poss√≠veis: IPs, dom√≠nios, softwares, e-mails, senhas, trabalhos, pesquisas, pessoas, organiza√ß√£o da empresa etc.</p>
<p>√â essa a fase que mais se gasta tempo, e tamb√©m √© a que constr√≥i a base para as fases posteriores, portanto, invista um tempo consider√°vel apenas pesquisando pelo seu alvo. Sabemos que um aprendiz sempre ir√° buscar por mais &ldquo;a√ß√£o&rdquo; e querer logo infectar o sistema, pegar uma reverse shell e ownar o AD, mas tentar realizar essas a√ß√µes sem planejamento, busca e mapeamento de informa√ß√µes e ativos da rede pode trazer problemas nas pr√≥ximas fases.</p>
<p>Ao finalizar essa fase, o pentester ter√° mapeado a superf√≠cie de ataque da companhia contratante, ou seja, ter√° a vis√£o de um atacante externo com rela√ß√£o √†s informa√ß√µes dispon√≠veis.</p>
<p>Como saber o que √© importante a pesquisar? S√≥ √© poss√≠vel saber se algo ser√° utilizado ou n√£o no Pentest quando realmente for, logo, anote e armazene o m√°ximo de informa√ß√µes encontradas, mesmo que elas possam n√£o fazer sentido nessa fase. √â melhor sobrar do que faltar :)</p>
<p>E por onde come√ßamos a pesquisar? Bem, antes de sabermos como, o qu√™, e onde pesquisarmos, √© importante separarmos a busca de informa√ß√µes em dois tipos: passiva e ativa. Saber diferenci√°-las √© vital para certos tipos de atividades e contratos que requerem uma a√ß√£o mais furtiva ou agressiva, entretanto, note que muitas vezes uma determinada a√ß√£o pode ser considerada um misto de <em>passive</em> com <em>active</em>.</p>
<h2 id="passive-information-gathering">Passive Information Gathering<a href="#passive-information-gathering" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>A busca de informa√ß√µes de forma passiva √© aquela realizada sem intera√ß√£o direta com o alvo. Pensando de forma mais estrita, isso n√£o permitiria nem acessar o website institucional do alvo, apenas utilizar ferramentas de terceiros para acess√°-lo. Entretanto, h√° literaturas que definem Passive Information Gathering de forma menos restritiva, permitindo ao profissional que realize a√ß√µes de um usu√°rio comum. Por exemplo, se o alvo √© um e-commerce, realizar um cadastro, login e pesquisar por produtos s√£o a√ß√µes de clientes, que n√£o devem levantar suspeitas por partes de tecnologias ou times de seguran√ßa.</p>
<p><em>Open Source Intelligence</em> (OSINT) √© um outro nome dado a essa procura passiva, baseada em fontes abertas, como sites de emprego, pesquisas publicadas sobre tecnologias, linkedin, hist√≥rico de DNS, tecnologias utilizadas na constru√ß√£o do site e servidores, entre outras fontes na vastid√£o da Internet. Devido √† globaliza√ß√£o, at√© mesmo pequenas empresas marcam presen√ßa na Internet, permitindo que existam rastros, ou &ldquo;pegadas&rdquo; que podem ser utilizadas para nosso engajamento ofensivo.</p>
<p>√â importante notar que, devido √† sua natureza passiva, essa etapa n√£o gera alertas ou investiga√ß√µes de times de seguran√ßa, pois n√£o h√° intera√ß√£o direta com o alvo. Logo, √© a forma mais furtiva de obter informa√ß√µes e que pode ser utilizada sem problemas quanto a essas quest√µes.</p>
<p>Dito isso, abaixo est√£o descritas algumas ferramentas que podem ser utilizadas para a realiza√ß√£o de Passive Information Gathering.</p>
<h1 id="ferramentas-e-plataformas-para-passive-information-gathering">Ferramentas e plataformas para Passive Information Gathering<a href="#ferramentas-e-plataformas-para-passive-information-gathering" class="hanchor" ariaLabel="Anchor">#</a> </h1>
<h2 id="informa√ß√µes-de-ips-e-dom√≠nios">Informa√ß√µes de IPs e dom√≠nios<a href="#informa√ß√µes-de-ips-e-dom√≠nios" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>Mapear o m√°ximo poss√≠vel de hosts, intervalos de endere√ßos, subdom√≠nios com IPs existentes (ou n√£o mais gerenciados, suscet√≠veis a <a href="https://book.hacktricks.xyz/v/portugues-ht/pentesting-web/domain-subdomain-takeover"><em>Subdomain Takeover</em></a>) ir√° fornecer a superf√≠cie de ataque para descoberta de vulnerabilidades e configura√ß√µes erradas em servi√ßos, que ser√£o fundamentais nas pr√≥ximas fases do pentest.</p>
<h3 id="whois">whois<a href="#whois" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><em>whois</em> √© um protocolo e tamb√©m uma ferramenta que permite requisitar por informa√ß√µes do registrante do dom√≠nio, nameservers, e-mails do respons√°vel pelo dom√≠nio e da empresa que disponibilizou para registro etc. A ferramenta j√° vem instalada por padr√£o no Kali Linux.</p>
<p>Abaixo est√£o algumas imagens contendo os resultados do <em>whois</em> para o dom√≠nio <strong>midnighthackings.com</strong>:</p>

<img src="img/ca62110c054f2e350de213ae5fc2d6df.png"  class="center"  style="border-radius: 1px;"    />



<img src="img/dae1a9eede7815c1132cc0f69100775a.png"  class="center"  style="border-radius: 1px;"    />


<p>Note que j√° podemos inferir algumas coisas sobre o dom√≠nio <strong>midnighthackings.com</strong>:</p>
<ul>
<li>O registro foi feito pelo provedor de dom√≠nios Squarespace (linha do <em>Registrar URL</em>);</li>
<li>Os nameservers s√£o do google. Nameservers s√£o servidores DNS que ir√£o armazenar os registros do dom√≠nio, bem como traduzir os nomes dos subdom√≠nios requisitados para os IPs respectivos;</li>
<li>N√£o √© poss√≠vel saber a maior parte das informa√ß√µes de quem registrou o dom√≠nio devido ao uso do servi√ßo <em>whois privacy/domain privacy</em>. Entretanto, o pa√≠s/estado est√£o p√∫blicos.</li>
</ul>
<p>Tamb√©m √© poss√≠vel realizar o whois por plataformas webs que fornecem um cliente para o servi√ßo. Abaixo est√£o alguns deles:</p>
<ul>
<li><a href="https://who.is/">https://who.is/</a></li>
<li><a href="https://viewdns.info/whois/">https://viewdns.info/whois/</a></li>
<li><a href="https://www.iana.org/whois">https://www.iana.org/whois</a></li>
<li><a href="https://registro.br/tecnologia/ferramentas/whois/">https://registro.br/tecnologia/ferramentas/whois/</a></li>
</ul>
<blockquote>
<p>A evolu√ß√£o do whois √© o protocolo RDAP, que permite, entre outros recursos, dom√≠nios internacionalizados e uma padroniza√ß√£o nos campos retornados. Pesquise via RDAP por <a href="https://client.rdap.org/">esse link.</a></p>
</blockquote>
<h4 id="intervalo-de-endere√ßos">Intervalo de endere√ßos<a href="#intervalo-de-endere√ßos" class="hanchor" ariaLabel="Anchor">#</a> </h4>
<p>Tamb√©m √© poss√≠vel encontrar alguns IPs quando se pesquisa por um dom√≠nio - por exemplo, o IP dos nameservers. Realizar um whois para qualquer um desses IPs deve resultar nas informa√ß√µes da empresa que distribuiu esses IPs, bem como os intervalos de blocos que foram alocados para a empresa contratante. Dessa forma, √© poss√≠vel reunir poss√≠veis hosts para uso futuro.</p>
<blockquote>
<p>Curiosidade: os blocos de IPv4 e as <em>Autonomous System Numbers</em> (ASNs) do mundo s√£o distribu√≠dos pela organiza√ß√£o <em>Internet Assigned Numbers Authority</em> (IANA) para as diversas regi√µes do mundo pelas <em>Regional Internet Registry</em> (RIR), que as distribuem para os pa√≠ses e outras subdivis√µes. Abaixo est√° uma lista das RIRs e suas respectivas regi√µes.</p>

<img src="img/5b369a71356187aac8b838ef7fe474d5.png"  class="center"  style="border-radius: 1px;"    />


</blockquote>
<h2 id="passive-dns">Passive DNS<a href="#passive-dns" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>O DNS √© um dos protocolos mais importantes da Internet, e √© o respons√°vel (principalmente) por responder requisi√ß√µes de resolu√ß√£o de nomes para IPs. Quando se aluga um dom√≠nio, √© poss√≠vel alterar as informa√ß√µes DNS a partir da plataforma contratada, que geralmente cont√©m um nameserver pr√≥prio para uso dos clientes.</p>
<p>Vejamos alguns tipos de informa√ß√£o DNS:</p>
<ol>
<li><strong>A</strong> - registro IPv4; mapeia um nome para um endere√ßo;</li>
<li><strong>AAAA</strong> - registro IPv6; mapeia um nome para um endere√ßo;</li>
<li><strong>MX</strong> - armazena a informa√ß√£o sobre o servidor de e-mail do dom√≠nio;</li>
<li><strong>CNAME</strong> - permite realizar um <em>alias</em> (apelido) para um nome, permitindo acessar um host qualquer - inclusive de um dom√≠nio diferente - atrav√©s de um alias do dom√≠nio que possui. Exemplo de uso: CNAME blog.midnighthackings.com √© um alias para midnight-rev.github.io;</li>
<li><strong>PTR</strong> - permite realizar <em>reverse lookups</em> - o processo de buscar os nomes atribu√≠dos a um IP;</li>
<li><strong>SOA</strong> - cont√©m informa√ß√µes administrativas e √∫teis para realizar transfer√™ncias de zona;</li>
<li><strong>TXT</strong> - pode ser utilizado para diversos fins; o mais comum √© para realizar verifica√ß√£o do dom√≠nio - &ldquo;se voc√™ possui tal dom√≠nio, crie um registro TXT com esse nome e valor&rdquo;.</li>
</ol>
<p>O banco de dados de um servidor DNS √© chamado de <em>zone file</em> e cont√©m todos os registros (p√∫blicos e n√£o p√∫blicos), sendo uma excelente fonte para o mapeamento da rede interna - caso exista um servidor malconfigurado! No pr√≥ximo artigo veremos como podemos obter esse arquivo com <em>zone transfer</em>. Por enquanto, vamos nos ater a ferramentas que ir√£o verificar o DNS de forma passiva para n√≥s:</p>
<h3 id="dnsdumpster">DNSDumpster<a href="#dnsdumpster" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>O <a href="https://dnsdumpster.com/">DNSDumpster</a> √© uma plataforma que armazena o hist√≥rico DNS e √© gratuita para buscas. Dentre os principais recursos, h√° o mapeamento dos blocos de IP no mapa terrestre, busca de nameservers, os registros (MX, TXT etc), servi√ßos e portas abertas em hosts, al√©m de um mapeamento em grafo. Entretanto, h√° um problema particular: essa ferramenta traz o hist√≥rico, uma foto do passado, que pode n√£o refletir o presente.</p>
<p>Vejamos o resultado do DNSDumpster para o dom√≠nio <strong>midnighthackings.com</strong>:</p>

<img src="img/951297762305be890b8cdb37eb4e0992.png"  class="center"  style="border-radius: 1px;"    />


<p>Note, na imagem acima, que a plataforma identificou um host, <em>ctf.midnighthackings.com</em> que estava, na data do scan do DNSDumpster, com o servi√ßo SSH exposto com vers√£o 7.4.</p>
<p>Abaixo est√° um exemplo da vis√£o de grafo do mapeamento do dom√≠nio.</p>

<img src="img/cdf12db470d5f2bf744a5375ce59d766.png"  class="center"  style="border-radius: 1px;"    />


<h3 id="sublist3r">sublist3r<a href="#sublist3r" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><em>sublist3r</em> √© uma ferramenta que realiza uma busca passiva DNS em um dom√≠nio, tentando encontrar subdom√≠nios. Isso √© feito a partir de requisi√ß√µes para plataformas de busca, como o google, virustotal e yahoo. Dessa forma, n√£o h√° contato direto do pentester com o alvo, mas pode haver bloqueios de certos provedores devido √† enorme quantidade de requisi√ß√µes realizadas - use com cautela!</p>
<p>No Kali Linux, utilize o comando abaixo para instalar o sublist3r.</p>
<p><code>sudo apt update -y; sudo apt install sublist3r -y</code></p>
<p>O uso mais simples do sublist3r est√° expresso na imagem abaixo, passando o dom√≠nio via op√ß√£o <strong>-d</strong>:</p>

<img src="img/451cfd77cb8d56ccd0e307b2845ec869.png"  class="center"  style="border-radius: 1px;"    />


<p>Nesse caso, foram realizadas requisi√ß√µes para diversas engines de busca e houve retorno de 3 subdom√≠nios: <em>blog.midnighthackings.com</em>, <em>ctf.midnighthackings.com</em> e <em>linux4hackers.midnighthackings.com</em>. N√£o √© poss√≠vel saber quais servi√ßos est√£o dispon√≠veis nesses subdom√≠nios - ou at√© mesmo se eles est√£o ativos ainda - mas j√° s√£o potenciais alvos para um scan nas pr√≥ximas fases.</p>
<blockquote>
<p>A ferramenta tamb√©m possui o recurso de bruteforce DNS, por√©m isso se enquadraria em busca de informa√ß√µes de forma ativa.</p>
</blockquote>
<h2 id="web">Web<a href="#web" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>A web √© regida pelos protocolos HTTP/HTTPS e √© um dos protocolos mais utilizados, juntamente com o DNS. A maior parte das empresas e organiza√ß√µes t√™m um site institucional ou de e-commerce. No sentido de busca de informa√ß√µes de forma passiva, admitiremos o contato direto do pentester com o site de forma &ldquo;natural&rdquo; - como um cliente. Por exemplo, se √© um site de e-commerce, o pentester poder√° se cadastrar, fazer login, pesquisar por produtos, entre outras a√ß√µes comuns.</p>
<p>Algumas informa√ß√µes que sites podem conter: tecnologias utilizadas para constru√ß√£o do frontend/backend, p√°ginas administrativas, arquivos de backup expostos, credenciais e coment√°rios com dados sens√≠veis no c√≥digo-fonte.</p>
<h3 id="netcraft">Netcraft<a href="#netcraft" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><a href="https://searchdns.netcraft.com">Netcraft</a> √© uma plataforma que traz diversas informa√ß√µes sobre um site/subdom√≠nio, como tecnologias utilizadas, vulnerabilidades, entre outras.</p>
<p>Vejamos os resultados para o <em>blog.midnighthackings.com</em>:</p>

<img src="img/c0cbe07b1245041ee95d4daed61702bd.png"  class="center"  style="border-radius: 1px;"    />


<p>Pode ser destacado, na imagem acima, que o site <em><a href="https://blog.midnighthackings.com">https://blog.midnighthackings.com</a></em> √© hospedado pelo Github. Dado que o subdom√≠nio tem a palavra <em>blog</em> escrita, √© poss√≠vel inferir que o servi√ßo HTTP que roda nele √© uma p√°gina de blog e hospedada gratuitamente via <a href="https://pages.github.com/">Github Pages</a>, sendo um site est√°tico.</p>
<p>O Netcraft tamb√©m traz algumas informa√ß√µes sobre vulnerabilidades no SSL j√° conhecidas, mas nenhuma delas retornou como vulner√°vel.</p>

<img src="img/a1437648b707fb41fe2e4728d849a96c.png"  class="center"  style="border-radius: 1px;"    />


<p>Tamb√©m √© poss√≠vel saber qual o software que comp√¥s o site: Hugo CMS. Esse √© um gerador de sites est√°ticos a partir de arquivos Markdown.</p>

<img src="img/1287d239123157c5e53b666843a506f3.png"  class="center"  style="border-radius: 1px;"    />


<blockquote>
<p>Para o leitor, recomendo que fa√ßa o mesmo para o ctf.midnighthackings.com e o linux4hackers.midnighthackings.com</p>
</blockquote>
<h3 id="tecnologias">Tecnologias<a href="#tecnologias" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>As tecnologias podem demonstrar quais softwares s√£o mais utilizados para a constru√ß√£o dos sites da empresa, e isso pode levar a dois pontos principais para o pentester:</p>
<ul>
<li>vulnerabilidades a serem exploradas;</li>
<li>uso das tecnologias como forma de phishing, como e-mails falsos de atualiza√ß√£o dos pacotes.</li>
</ul>
<h4 id="wappalyzer">Wappalyzer<a href="#wappalyzer" class="hanchor" ariaLabel="Anchor">#</a> </h4>
<p><a href="https://chromewebstore.google.com/detail/wappalyzer-technology-pro/gppongmhjkpfnbhagpmjfkannfbllamg?hl=pt-BR">Wappalyzer</a> √© uma extens√£o para navegador que, ao acessar uma p√°gina, permite identificar as tecnologias que a construiram.</p>
<p>Abaixo est√£o os resultados para <em>blog.midnighthackings.com</em>. Alguns pontos interessantes:</p>
<ul>
<li>a <em>Content Delivery Network</em>, que se encarrega da disponibilidade do site ao redor do mundo, √© a Fastly;</li>
<li>o gerador de sites √© o hugo e a plataforma que hospeda √© o Github Pages - corroborando para o resultado no Netcraft;</li>
</ul>

<img src="img/b46d78802566a4e62734a8dbfca6d289.png"  class="center"  style="border-radius: 1px;"    />


<blockquote>
<p>Para o leitor, recomendo que fa√ßa o mesmo para o ctf.midnighthackings.com e o linux4hackers.midnighthackings.com</p>
</blockquote>
<h4 id="whatweb">whatweb<a href="#whatweb" class="hanchor" ariaLabel="Anchor">#</a> </h4>
<p>whatweb √© uma ferramenta dispon√≠vel no Kali Linux que ir√° fazer um trabalho semelhante ao que o Wappalyzer realiza. √â mais um aliado que trar√° alguns resultados extras mais espec√≠ficos, como o que encontrar no conte√∫do da p√°gina.</p>
<p>Vejamos o resultado para os tr√™s subdom√≠nios que encontramos:</p>

<img src="img/dbba60d2dc4c546931c8e2d1c323f452.png"  class="center"  style="border-radius: 1px;"    />


<p>Alguns pontos a serem destacados:</p>
<ol>
<li><em>blog.midnighthackings.com</em>
<ul>
<li>Foi encontrado o e-mail <em><a href="mailto:midnight.reverser@outlook.com">midnight.reverser@outlook.com</a></em> na p√°gina, o que j√° pode ser utilizado para ataques de brute-force, password-spray, email spoof ou phishing;</li>
<li>Foi poss√≠vel verificar o nome do autor do blog (<em>Midnight Reverser</em>) e a vers√£o exata do hugo (0.121.2);</li>
<li>Tamb√©m h√° possivelmente um Proxy Reverso para acelera√ß√£o de conte√∫do, o Varnish na vers√£o 1.1.</li>
</ul>
</li>
<li><em>ctf.midnighthackings.com</em>
<ul>
<li>O site est√° rodando no servidor nginx/1.24.0;</li>
<li>O site pode ter sido contru√≠do utilizando o projeto opensource <a href="https://ctfd.io/">CTFd</a>, que permite criar sites para eventos de CTF - desafios em seguran√ßa da informa√ß√£o.</li>
</ul>
</li>
<li><em>linux4hackers.midnighthackings.com</em>
<ul>
<li>H√° um novo e-mail encontrado: <em><a href="mailto:books@midnighthackings.com">books@midnighthackings.com</a></em>;</li>
<li>Ao que parece, o site est√° por detr√°s da <em>Cloudflare</em>, um provedor estadunidense que prov√™ v√°rios servi√ßos, dentre eles: <em>Web Application Firewall</em> (WAF), que proteje sites, e anonimiza√ß√£o do IP original do servidor a partir do uso do WAF;</li>
<li>O gerador de conte√∫do √© o Gitbook, logo podemos inferir que o prop√≥sito desse subdom√≠nio √© de apresentar um livro, um manual ou documenta√ß√£o de algo;</li>
<li>Por fim, temos o t√≠tulo <em>Introdu√ß√£o | Linux b√°sico para hackers</em>, que podemos inferir que √© um livro com base em tudo que encontramos sobre esse subdom√≠nio.</li>
</ul>
</li>
</ol>
<h3 id="wayback-machine">WayBack Machine<a href="#wayback-machine" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>Sites s√£o vivos e dessa forma quero me referir a mudan√ßas. Elas ocorrem ao longo do tempo, por v√°rios motivos: mudan√ßa de design, de ideias ou at√© completa repagina√ß√£o. Dessa forma, informa√ß√µes que outrora estavam dispon√≠veis e podem ser ben√©ficas para o pentest, podem n√£o estar mais no ar.</p>
<p>O <a href="https://web.archive.org/">Wayback Machine</a>, da institui√ß√£o Internet Archive, tem por objetivo armazenar um hist√≥rico da web atrav√©s do armazenamento de uma &ldquo;foto&rdquo; dos sites. Logo, √© bem prov√°vel que exista vers√µes anteriores de alguns dos sites da empresa contratante, em especial se ela j√° tem anos de mercado e √© bem conhecida nacionalmente/internacionalmente.</p>
<p>Vejamos o resultado para <em><a href="http://blog.midnighthackings.com">http://blog.midnighthackings.com</a></em>:</p>

<img src="img/3a5440e1f8acfbdb3279437197c2daed.png"  class="center"  style="border-radius: 1px;"    />


<p>H√° snapshots do site no intervalo de 2022 a 2024. Selecionando o snapshot de 07 de julho de 2022, podemos ver o in√≠cio do blog, com apenas um post e com um estilo totalmente diferente do atual.</p>

<img src="img/ba8cd157d90e558687288bd552701ec2.png"  class="center"  style="border-radius: 1px;"    />


<p>Algumas vezes √© poss√≠vel encontrar informa√ß√µes importantes para o pentest, mas nesse site s√≥ podemos especular que ele deva ter sido criado por volta de 2022.</p>
<h3 id="waf">WAF<a href="#waf" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>Os WAFs s√£o firewalls que protegem os sites contra requisi√ß√µes autom√°ticas e maliciosas. Para isso, as requisi√ß√µes devem passar primeiro por ele, que ir√° redirecionar as requisi√ß√µes n√£o maliciosas para o site verdadeiro.</p>
<p>Para um pentest, isso tem implica√ß√£o em scanners espec√≠ficos de HTTP, em que ser√£o necess√°rios configura√ß√µes espec√≠ficas para bypassar os WAFs. Muitos WAFs, como a Cloudflare, tamb√©m escondem o IP real do cliente, mas caso seja poss√≠vel descobri-lo de alguma forma, realizar scans pelo IP real pode realizar bypass do WAF.</p>
<p>Bem, e como identificar WAFs? As ferramentas j√° citadas podem dar uma no√ß√£o, mas podemos interagir minimamente com o website para identificar assinaturas de WAFs. Para isso, utilizaremos a ferramenta <em>wafw00f</em>, dispon√≠vel no kali.</p>
<p>O uso mais b√°sico da ferramenta √© passando o site diretamente via linha de comando. Veja os resultados para os sites que encontramos anteriormente:</p>
<ul>
<li>
<p>blog.midnighthackings.com - Fastly WAF

<img src="img/ae0de33404aa1bcd3502d2d1754ebede.png"  class="center"  style="border-radius: 1px;"    />

</p>
</li>
<li>
<p>ctf.midnighthackings.com - Sem WAF

<img src="img/2e62e87c986b6f060d8ae1d94b50ff6f.png"  class="center"  style="border-radius: 1px;"    />

</p>
</li>
<li>
<p>linux4hackers.midnighthackings.com - Cloudflare

<img src="img/850781f171824a57763dbdb9d1cb9807.png"  class="center"  style="border-radius: 1px;"    />

</p>
</li>
</ul>
<h2 id="google-hacking--ghdb">Google Hacking &amp; GHDB<a href="#google-hacking--ghdb" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>Uma das ferramentas de Threat Intelligence que tamb√©m √© amplamente utilizada em pentest √© o Google Hacking. Em resumo, √© utilizar o Google Search ao nosso favor, fazendo pesquisas avan√ßadas, com o uso de Dorks - termos especiais que permitem instruir o google a retornar coisas espec√≠ficas sobre o alvo.</p>
<p>Dessa forma, √© poss√≠vel encontrar p√°ginas &ldquo;escondidas&rdquo;, como pain√©is administrativos, diret√≥rios de backup, diret√≥rios com listagem aberta, entre outras falhas de configura√ß√£o. Nesse artigo abordaremos apenas alguns exemplos, visto que √© um assunto extenso, que garantiria um artigo inteiro sobre.</p>
<p>Para pesquisar sobre sites com poss√≠vel vulnerabilidade de <a href="https://portswigger.net/web-security/sql-injection">SQL Injection</a> (ou at√© <a href="https://portswigger.net/web-security/access-control/idor">IDOR</a>), podemos utilizar a dork <em>inurl:.php?id=</em>, que ir√° retornar sites que na URL (<em>inurl</em>) contenham uma p√°gina PHP (.php) e um par√¢metro modific√°vel via GET (?id=). N√£o se preocupe se n√£o entender esse par√°grafo, isso ficar√° mais claro nos artigos de vulnerabilidades web.</p>

<img src="img/682f90c235edb1d59e3e38e46008b8b1.png"  class="center"  style="border-radius: 1px;"    />


<p>Podemos pesquisar tamb√©m por p√°ginas de subdom√≠nios via &ldquo;site:*.dominio.com&rdquo;:</p>

<img src="img/9991f5d702cc68b0be9e7b66c1230d32.png"  class="center"  style="border-radius: 1px;"    />


<p>Buscando por p√°ginas com Directory Listing ativado - ou seja, √© poss√≠vel listar todo o conte√∫do do diret√≥rio - via <em>intitle:&ldquo;index of&rdquo;</em>:</p>

<img src="img/b25d921c31e1b185289eecc65580214d.png"  class="center"  style="border-radius: 1px;"    />


<p>Alguns outros dorks importantes para um pentest:</p>
<ul>
<li>filetype:pdf - p√°ginas contendo arquivos de tipos espec√≠ficos;</li>
<li>cache:site.com - busca por vers√µes em cache (mais antigas) do site no google. Nem sempre dispon√≠vel.</li>
</ul>
<h4 id="ghdb--dorksearch">GHDB &amp; Dorksearch<a href="#ghdb--dorksearch" class="hanchor" ariaLabel="Anchor">#</a> </h4>
<p>Foi criado, no <a href="https://www.exploit-db.com/google-hacking-database">Exploit DB</a>, uma s√©rie de dorks a serem utilizadas para diversos fins. Dessa forma, pode n√£o ser necess√°rio criar uma dork do zero, mas sim alterar uma j√° existente que traz bons resultados:</p>

<img src="img/100467bfdcf88c1b17ccdfe1ee6e5bf4.png"  class="center"  style="border-radius: 1px;"    />


<p>Tamb√©m h√° o site <a href="https://dorksearch.com/">DorkSearch</a>, que auxilia na montagem e pesquisa de dorks.</p>

<img src="img/97d8d82325b3c266f6507808e0255d21.png"  class="center"  style="border-radius: 1px;"    />


<h2 id="shodan">Shodan<a href="#shodan" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p><a href="https://www.shodan.io/">Shodan</a> √© uma plataforma que realiza crawling em IPs p√∫blicos e descobre quais servi√ßos est√£o rodando nesses IPs. √â uma excelente fonte de informa√ß√µes passivas, trazendo at√© mesmo imagens dos servi√ßos, acesso a c√¢meras via IP expostas sem autentica√ß√£o e busca de vulnerabilidades nos servi√ßos encontrados.</p>
<p>Entretanto, note que, como outras fontes de informa√ß√µes passivas, o resultado pode n√£o refletir o estado atual do que est√° dispon√≠vel.</p>
<p>No Shodan, a pesquisa √© feita via filtros <a href="https://www.shodan.io/search/filters">dispon√≠veis na documenta√ß√£o</a>. Assim como nas Dorks, √© poss√≠vel concaten√°-los para retornar resultados mais espec√≠ficos. Alguns filtros importantes s√£o:</p>
<ul>
<li><strong>hostname:*.domain.com</strong> - pesquisa por hosts ligados ao dom√≠nio;</li>
<li><strong>net:10.0.0.0/24 - pesquisa</strong> por hosts ligados ao bloco de endere√ß√µs CIDR;</li>
<li><strong>vuln:CVE-2017-0144</strong> - pesquisa por hosts com determinada vulnerabilidade.</li>
</ul>
<p>Abaixo est√£o alguns resultados do Shodan para os hosts ligados ao dom√≠nio <em>midnighthackings.com</em>:</p>

<img src="img/96ac49106bd480a8383be3b5ef639831.png"  class="center"  style="border-radius: 1px;"    />


<p>√â poss√≠vel verificar que h√° 3 portas abertas, com os servi√ßos de SSH, HTTP e HTTPS dispon√≠veis. √â feito um <em>Banner Grabbing</em>, t√©cnica que veremos nos pr√≥ximos artigos, para identificar o servi√ßo rodando, retornando, inclusive sua vers√£o.</p>
<p>Note que o servi√ßo SSH est√° em uma vers√£o mais atualizada que o que encontramos na etapa do DNSDumpster. Isso significa que o crawler do Shodan visitou o host mais recentemente que o DNSDumpster. Para termos mais certeza sobre a vers√£o correta que est√° exposta, √© importante seguir em um Banner Grabbing de forma ativa.</p>

<img src="img/d4fc19193001a20b262097d63f493bce.png"  class="center"  style="border-radius: 1px;"    />


<p>No shodan, tamb√©m √© poss√≠vel verificar os registros DNS e assim encontrar cada vez mais hosts e configura√ß√µes atrelados ao dom√≠nio:</p>

<img src="img/3110236b68029765d2624d575cf4cfd0.png"  class="center"  style="border-radius: 1px;"    />


<h2 id="emails">Emails<a href="#emails" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>E-mails podem ser utilizados de mil maneiras diferentes em um pentest, logo, colet√°-los √© uma etapa <strong>essencial</strong> de todo pentest. Eles podem ser utilizados para phishing, busca de vazamentos de credenciais, brute-force, password-spray, entre outros tipos de ataque.</p>
<h3 id="theharverster">theHarverster<a href="#theharverster" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>theHarverster √© uma ferramenta que utilizar√° o bing e outras search engines para buscar por e-mails de forma passiva, dado um dom√≠nio. Note que ele realizar√° m√∫ltiplas requisi√ß√µes e pode ser necess√°rio limitar os resultados para que n√£o haja um bloqueio por parte do provedor.</p>
<p>O uso mais comum √© <em>theHarverster -d domain.com -b bing</em>, no qual a op√ß√£o <strong>-d</strong> determinar√° o dom√≠nio a ser pesquisado e <strong>-b</strong> o provedor de busca.</p>
<p>No caso do <em>midnighthackings.com</em> via bing, o theHarverster n√£o encontrou nenhuma e-mail associado. Por√©m, j√° temos e-mails obtidos das fases anteriores, e por isso √© importante n√£o confiar cegamente em apenas uma √∫nica ferramenta no pentest - busque por outras ferramentas, procure manualmente!</p>

<img src="img/53ce8d53bc219e4e7a4a14e62eabff56.png"  class="center"  style="border-radius: 1px;"    />


<h2 id="credenciais-vazadas">Credenciais Vazadas<a href="#credenciais-vazadas" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>Uma das fontes que atacantes e pentesters utilizam para realizar o acesso inicial na rede da empresa √© atrav√©s de uma conta leg√≠tima, v√°lida, como um outlook, que tem uma senha vazada, reutilizada, e que n√£o √© atualizada h√° tempos.</p>
<p>H√° diversos f√≥runs, canais de telegram e outras fontes que permitem realizar o download dessas bases de gigabytes de credenciais. Nesse artigo, trataremos apenas da ferramenta <a href="https://haveibeenpwned.com/">Have I Been Pwned</a>, que realiza uma busca nas mais diversas bases de dados vazadas e indica se j√° houve algum vazamento de credenciais para aquele e-mail.</p>
<p>Para o e-mail que encontramos, <em><a href="mailto:midnight.reverser@outlook.com">midnight.reverser@outlook.com</a></em>, n√£o h√° vazamentos conhecidos (at√© agora!). Esse processo deve ser feito com todos os e-mails que foram encontrados, al√©m de buscar as credenciais nas bases de dados e test√°-las para acesso - tudo isso agrega qualidade ao relat√≥rio.</p>

<img src="img/695aa2aac59a62f68aa5a84409b187b9.png"  class="center"  style="border-radius: 1px;"    />


<h2 id="outros">Outros<a href="#outros" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>O mundo de busca de informa√ß√µes √© imenso e n√£o cobrimos 10% do que pode ser realizado de forma passiva. Desse modo, √© importante que o leitor procure por si pr√≥prio, invista um tempo praticando e busque mais plataformas/ferramentas. Damos o pontap√© inicial, agora √© com voc√™ :)</p>
<p>Seguem algumas outras fontes que podem ser importantes para essa etapa:</p>
<ul>
<li>Github, Github Gist, Gitlab, reposit√≥rios</li>
<li>Gitleaks, gitrob</li>
<li>Sites de emprego</li>
<li>Ferramenta Maltego</li>
<li><a href="https://osintframework.com/">OSINT Framework</a></li>
<li><a href="https://github.com/osintbrazuca/osint-brazuca">OSINT Brazuca</a></li>
</ul>

      </div></div>

  
    
<div class="pagination">
  <div class="pagination__title">
    <span class="pagination__title-h">Ler outras postagens</span>
    <hr />
  </div>
  <div class="pagination__buttons">
    
      <a href="https://blog.midnighthackings.com/posts/malware-analysis-0x00/" class="button inline prev">
        &lt; [<span class="button__text">Trojans: introdu√ß√£o, an√°lise, BinDiff!</span>]
      </a>
    
    
      ::
    
    
      <a href="https://blog.midnighthackings.com/posts/my-journey-into-pentest-0x00/" class="button inline next">
         [<span class="button__text">Notas sobre Penetration Testing 0x00</span>] &gt;
      </a>
    
  </div>
</div>


  

  
    

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">
        <span>Midnight Hackings apoia o fim da escala 6x1!</span>
    
      <span>:: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by <a href="https://github.com/panr" target="_blank">panr</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
